(this["webpackJsonparound-react"]=this["webpackJsonparound-react"]||[]).push([[0],{12:function(e,t,n){},14:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(5),o=n.n(r),i=(n(12),n(2)),s=n.p+"static/media/header__logo_large.4e8e0a1d.svg",u=n(0);var l=function(){return Object(u.jsx)("header",{className:"header",children:Object(u.jsx)("img",{className:"header__logo",src:s,alt:"Around the U.S. logo"})})},d=Object(a.createContext)();var h=function(e){var t=e.data,n=e.onCardClick,c=e.onCardLike,r=e.onCardDelete,o=Object(a.useContext)(d)._id,i=o===t.owner._id,s=t.likes.some((function(e){return e._id===o}));return Object(u.jsxs)("li",{className:"card",children:[i?Object(u.jsx)("button",{className:"card__delete-button",type:"button","aria-label":"delete",onClick:function(){return r(t)}}):"",Object(u.jsx)("img",{className:"card__image",src:t.link,alt:t.name,onClick:function(){return n(t)}}),Object(u.jsxs)("div",{className:"card__panel",children:[Object(u.jsx)("h2",{className:"card__title",children:t.name}),Object(u.jsxs)("div",{className:"card__like",children:[Object(u.jsx)("button",{className:"card__like-button ".concat(s?"card__like-button_active":""),type:"button","aria-label":"Like",onClick:function(){return c(t)}}),Object(u.jsx)("p",{className:"card__like-counter",children:t.likes.length})]})]})]})},b=n.p+"static/media/profile__image.453c0ae5.jpg";var p=function(e){var t=e.onEditProfileClick,n=e.onAddPlaceClick,a=e.onEditAvatarClick,r=e.onCardClick,o=e.onCardLike,i=e.onCardDelete,s=e.cardsList,l=c.a.useContext(d),p=l.name,m=l.avatar,j=l.about;return Object(u.jsxs)("main",{className:"main",children:[Object(u.jsxs)("section",{className:"profile",children:[Object(u.jsx)("button",{className:"profile__avatar",type:"button",onClick:a,children:Object(u.jsx)("img",{className:"profile__image",src:m||b,alt:"profile"})}),Object(u.jsxs)("div",{className:"profile__info",children:[Object(u.jsx)("h1",{className:"profile__name",children:p||"Please be patient"}),Object(u.jsx)("button",{className:"profile__edit-button",type:"button","aria-label":"Edit profile",onClick:t}),Object(u.jsx)("p",{className:"profile__bio",children:j||"We are fetching your user info..."})]}),Object(u.jsx)("button",{className:"profile__add-button",type:"button","aria-label":"Add an item",onClick:n})]}),Object(u.jsx)("section",{className:"gallery",children:Object(u.jsx)("ul",{className:"gallery__container",children:s.map((function(e){return Object(u.jsx)(h,{data:e,onCardClick:r,onCardLike:o,onCardDelete:i},e._id)}))})})]})};var m=function(){return Object(u.jsx)("footer",{className:"footer",children:Object(u.jsx)("p",{className:"footer__copyrighs",children:"\xa9 2021 Around The U.S."})})};var j=function(e){var t=e.title,n=e.name,a=e.buttonText,r=e.isOpen,o=e.onClose,s=e.onSubmit,l=c.a.useState(a),d=Object(i.a)(l,2),h=d[0],b=d[1];return Object(u.jsx)("div",{className:"popup popup_name_".concat(n," ").concat(r?"popup_visible":""),onClick:function(e){e.target.classList.contains("popup_visible")&&o()},children:Object(u.jsxs)("div",{className:"popup__container",children:[Object(u.jsx)("button",{className:"popup__close-button popup__close-button_shrink",type:"button","aria-label":"close",onClick:o}),Object(u.jsx)("h2",{className:"popup__title",children:t}),Object(u.jsxs)("form",{className:"form form_name_".concat(n),name:n,onSubmit:function(e){e.preventDefault(),b("Saving..."),s().then((function(){return b(a)}))},children:[e.children,Object(u.jsx)("button",{className:"form__save-button",type:"submit",children:h})]})]})})};var _=function(e){var t=e.title,n=e.name,c=e.buttonText,r=e.isOpen,o=e.onClose,s=e.onSubmit,l=Object(a.useContext)(d),h=l.name,b=l.about,p=Object(a.useState)(h),m=Object(i.a)(p,2),_=m[0],f=m[1],O=Object(a.useState)(b),x=Object(i.a)(O,2),v=x[0],C=x[1];function k(e){"name"===e.target.name?f(e.target.value):C(e.target.value)}return Object(a.useEffect)((function(){C(b),f(h)}),[h,b,r]),Object(u.jsxs)(j,{title:t,name:n,buttonText:c,isOpen:r,onClose:o,onSubmit:function(){return s({name:_,about:v})},children:[Object(u.jsxs)("label",{className:"form__field",children:[Object(u.jsx)("input",{id:"input_name",className:"form__input form__input_type_name",value:_,type:"text",name:"name",placeholder:"Name",minLength:"2",maxLength:"40",required:!0,onChange:k}),Object(u.jsx)("span",{id:"input_name-error",className:"form__input-error"})]}),Object(u.jsxs)("label",{className:"form__field",children:[Object(u.jsx)("input",{id:"input_bio",className:"form__input form__input_type_bio",value:v,type:"text",name:"bio",placeholder:"About me",minLength:"2",maxLength:"200",required:!0,onChange:k}),Object(u.jsx)("span",{id:"input_bio-error",className:"form__input-error"})]})]})};var f=function(e){var t=e.title,n=e.name,c=e.buttonText,r=e.isOpen,o=e.onClose,s=e.onSubmit,l=Object(a.useState)(""),d=Object(i.a)(l,2),h=d[0],b=d[1],p=Object(a.useRef)();return Object(a.useEffect)((function(){}),[r]),Object(u.jsx)(j,{title:t,name:n,buttonText:c,isOpen:r,onClose:o,onSubmit:function(){return s(h)},children:Object(u.jsxs)("label",{className:"form__field",children:[Object(u.jsx)("input",{id:"input_url",className:"form__input form__input_type_url",ref:p,type:"url",name:"url",placeholder:"Image URL",required:!0,onChange:function(e){b(p.current.value)}}),Object(u.jsx)("span",{id:"input_url-error",className:"form__input-error"})]})})};var O=function(e){var t=e.title,n=e.name,c=e.buttonText,r=e.isOpen,o=e.onClose,s=e.onSubmit,l=Object(a.useState)(""),d=Object(i.a)(l,2),h=d[0],b=d[1],p=Object(a.useState)(""),m=Object(i.a)(p,2),_=m[0],f=m[1];function O(e){"title"===e.target.name?b(e.target.value):f(e.target.value)}return Object(a.useEffect)((function(){b(""),f("")}),[r]),Object(u.jsxs)(j,{title:t,name:n,buttonText:c,isOpen:r,onClose:o,onSubmit:function(){return s({name:h,link:_})},children:[Object(u.jsxs)("label",{className:"form__field",children:[Object(u.jsx)("input",{id:"input_title",className:"form__input form__input_type_title",value:h,type:"text",name:"title",placeholder:"Title",minLength:"1",maxLength:"30",required:!0,onChange:O}),Object(u.jsx)("span",{id:"input_title-error",className:"form__input-error"})]}),Object(u.jsxs)("label",{className:"form__field",children:[Object(u.jsx)("input",{id:"input_link",className:"form__input form__input_type_link",value:_,type:"url",name:"link",placeholder:"Image link",required:!0,onChange:O}),Object(u.jsx)("span",{id:"input_link-error",className:"form__input-error"})]})]})};var x=function(e){var t=e.card,n=e.onClose;return Object(u.jsx)("div",{className:"popup popup_name_picture ".concat(t.link?"popup_visible":""),onClick:function(e){e.target.classList.contains("popup_visible")&&n()},children:Object(u.jsxs)("div",{className:"popup__picture-container",children:[Object(u.jsx)("button",{className:"popup__close-button",type:"button","aria-label":"close",onClick:n}),Object(u.jsx)("img",{className:"popup__picture",src:t.link,alt:t.name}),Object(u.jsx)("h2",{className:"popup__picture-title",children:t.name})]})})},v=n(3),C=n(6),k=n(7),g=function(){function e(t){var n=t.host,a=t.authorization;Object(C.a)(this,e),this._host=n,this._headers={authorization:a},this.userId=void 0}return Object(k.a)(e,[{key:"_handleResponse",value:function(e){return e.ok?e.json():Promise.reject("error: ".concat(e.status,", ").concat(e.statusText))}},{key:"getUserInfo",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"me";return fetch("".concat(this._host,"/users/").concat(t),{headers:this._headers}).then(this._handleResponse).then((function(t){return e.userId=t._id,t}))}},{key:"updateUserAvatar",value:function(e){return fetch("".concat(this._host,"/users/me/avatar"),{method:"PATCH",headers:Object(v.a)(Object(v.a)({},this._headers),{},{"Content-Type":"application/json"}),body:JSON.stringify({avatar:e})}).then(this._handleResponse)}},{key:"updateUser",value:function(e){var t=e.name,n=e.about;return fetch("".concat(this._host,"/users/me"),{method:"PATCH",headers:Object(v.a)(Object(v.a)({},this._headers),{},{"Content-Type":"application/json"}),body:JSON.stringify({name:t,about:n})}).then(this._handleResponse)}},{key:"getCards",value:function(){return fetch("".concat(this._host,"/cards"),{headers:this._headers}).then(this._handleResponse)}},{key:"addCard",value:function(e){var t=e.name,n=e.link;return fetch("".concat(this._host,"/cards"),{method:"POST",headers:Object(v.a)(Object(v.a)({},this._headers),{},{"Content-Type":"application/json"}),body:JSON.stringify({name:t,link:n})}).then(this._handleResponse)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._host,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then(this._handleResponse)}},{key:"addLike",value:function(e){return fetch("".concat(this._host,"/cards/likes/").concat(e),{method:"PUT",headers:this._headers}).then(this._handleResponse)}},{key:"removeLike",value:function(e){return fetch("".concat(this._host,"/cards/likes/").concat(e),{method:"DELETE",headers:this._headers}).then(this._handleResponse)}}]),e}(),N=new g({host:"https://around.nomoreparties.co/v1/group-12",authorization:"9dcb4203-ec5d-4132-a4af-e260b13cb4d2"});var y=function(){var e=c.a.useState({name:"",about:""}),t=Object(i.a)(e,2),n=t[0],a=t[1],r=c.a.useState([]),o=Object(i.a)(r,2),s=o[0],h=o[1],b=c.a.useState(!1),v=Object(i.a)(b,2),C=v[0],k=v[1],g=c.a.useState(!1),y=Object(i.a)(g,2),S=y[0],L=y[1],T=c.a.useState(!1),E=Object(i.a)(T,2),P=E[0],A=E[1],I=c.a.useState({isOpen:!1,cardId:""}),R=Object(i.a)(I,2),U=R[0],w=R[1],D=c.a.useState({}),q=Object(i.a)(D,2),F=q[0],J=q[1],z=function(){k(!1),L(!1),A(!1),J({})};function B(){return N.getCards().then((function(e){return h(e)})).catch((function(e){return console.log(e)}))}function H(){return N.getUserInfo().then((function(e){return a(e)})).catch((function(e){return console.log(e)}))}return c.a.useEffect((function(){var e=function(e){"Escape"===e.key&&z()};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[]),c.a.useEffect((function(){H().then(B).catch((function(e){return console.log(e)}))}),[]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(l,{}),Object(u.jsxs)(d.Provider,{value:n,children:[Object(u.jsx)(p,{onEditProfileClick:function(){return k(!0)},onAddPlaceClick:function(){return L(!0)},onEditAvatarClick:function(){return A(!0)},onCardClick:function(e){return J(e)},onCardLike:function(e){return e.likes.some((function(e){return e._id===n._id}))?N.removeLike(e._id).then(B).catch((function(e){return console.log(e)})):N.addLike(e._id).then(B).catch((function(e){return console.log(e)}))},onCardDelete:function(e){w({isOpen:!0,cardId:e._id})},cardsList:s}),Object(u.jsx)(_,{title:"Edit profile",name:"edit-profile",buttonText:"Save",isOpen:C,onClose:z,onSubmit:function(e){var t=e.name,n=e.about;return N.updateUser({name:t,about:n}).then(H).then((function(){return k(!1)})).catch((function(e){return console.log(e)}))}}),Object(u.jsx)(O,{title:"New Place",name:"new-place",buttonText:"Create",isOpen:S,onClose:z,onSubmit:function(e){var t=e.name,n=e.link;return N.addCard({name:t,link:n}).then(B).then((function(){return L(!1)})).catch((function(e){return console.log(e)}))}}),Object(u.jsx)(f,{title:"Change profile picture",name:"edit-avatar",buttonText:"Save",isOpen:P,onClose:z,onSubmit:function(e){return N.updateUserAvatar(e).then(H).then((function(){return A(!1)})).catch((function(e){return console.log(e)}))}}),Object(u.jsx)(j,{title:"Are you sure?",name:"confirm",buttonText:"Yes",isOpen:U.isOpen,onClose:z,onSubmit:function(){return N.deleteCard(U.cardId).then(B).then((function(){return w({isOpen:!1,cardId:""})})).catch((function(e){return console.log(e)}))}}),Object(u.jsx)(x,{card:F,onClose:z})]}),Object(u.jsx)(m,{})]})},S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,15)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),r(e),o(e)}))};o.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(y,{})}),document.getElementById("root")),S()}},[[14,1,2]]]);
//# sourceMappingURL=main.78a8b329.chunk.js.map